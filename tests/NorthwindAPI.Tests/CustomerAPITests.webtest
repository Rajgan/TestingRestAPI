<?xml version="1.0" encoding="utf-8"?>
<WebTest Name="CustomerAPITests" Id="cb5abd68-bfff-4d39-9f55-13f5bfcb5248" Owner="" Priority="2147483647" Enabled="True" CssProjectStructure="" CssIteration="" Timeout="0" WorkItemIds="" xmlns="http://microsoft.com/schemas/VisualStudio/TeamTest/2010" Description="" CredentialUserName="" CredentialPassword="" PreAuthenticate="True" Proxy="default" StopOnError="False" RecordedResultFile="" ResultsLocale="">
  <Items>
    <Request Method="GET" Guid="6424f5db-d8c0-4deb-8792-040a9ff2d004" Version="1.1" Url="{{Azure}}/api/customers" ThinkTime="0" Timeout="300" ParseDependentRequests="True" FollowRedirects="True" RecordResult="True" Cache="False" ResponseTimeGoal="0" Encoding="utf-8" ExpectedHttpStatusCode="200" ExpectedResponseUrl="" ReportingName="" IgnoreHttpStatusCode="False">
      <ValidationRules>
        <ValidationRule Classname="NorthwindAPI.Tests.ValidateResultCount, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" DisplayName="Result count validation rule" Description="This rule checks to see the REST API returns number of items requested" Level="High" ExectuionOrder="BeforeDependents">
          <RuleParameters>
            <RuleParameter Name="PageSizeElementPath" Value="pageSize" />
            <RuleParameter Name="ResultElementPath" Value="results" />
          </RuleParameters>
        </ValidationRule>
      </ValidationRules>
      <ExtractionRules>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramTotalCustomers" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="totalCustomers" />
          </RuleParameters>
        </ExtractionRule>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramPageNo" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="pageNo" />
          </RuleParameters>
        </ExtractionRule>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramPageSize" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="pageSize" />
          </RuleParameters>
        </ExtractionRule>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramNextPageLink" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="nextPageLink" />
          </RuleParameters>
        </ExtractionRule>
      </ExtractionRules>
    </Request>
    <Request Method="GET" Guid="666945dc-704e-4318-aa8a-4eb7e3cf4afc" Version="1.1" Url="{{Azure}}/api/customers" ThinkTime="0" Timeout="300" ParseDependentRequests="True" FollowRedirects="True" RecordResult="True" Cache="False" ResponseTimeGoal="0" Encoding="utf-8" ExpectedHttpStatusCode="200" ExpectedResponseUrl="" ReportingName="" IgnoreHttpStatusCode="False">
      <ExtractionRules>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramPrevPageLink" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="previousPageLink" />
          </RuleParameters>
        </ExtractionRule>
        <ExtractionRule Classname="NorthwindAPI.Tests.JsonExtractionRule, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" VariableName="paramNextPageLink" DisplayName="Extract JSON rule" Description="Custom extraction rule for extracting values from JSON web response generated by web performance test">
          <RuleParameters>
            <RuleParameter Name="Token" Value="nextPageLink" />
          </RuleParameters>
        </ExtractionRule>
      </ExtractionRules>
      <QueryStringParameters>
        <QueryStringParameter Name="pageNo" Value="2" RecordedValue="" CorrelationBinding="" UrlEncode="True" UseToGroupResults="False" />
      </QueryStringParameters>
    </Request>
    <Request Method="GET" Guid="ffdbdb87-4d86-4278-aba9-e7323d11d171" Version="1.1" Url="{{Azure}}/api/customers" ThinkTime="0" Timeout="300" ParseDependentRequests="True" FollowRedirects="True" RecordResult="True" Cache="False" ResponseTimeGoal="0" Encoding="utf-8" ExpectedHttpStatusCode="200" ExpectedResponseUrl="" ReportingName="" IgnoreHttpStatusCode="False">
      <ValidationRules>
        <ValidationRule Classname="NorthwindAPI.Tests.ValidateResultCount, NorthwindAPI.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" DisplayName="Result count validation rule" Description="This rule checks to see the REST API returns number of items requested" Level="High" ExectuionOrder="BeforeDependents">
          <RuleParameters>
            <RuleParameter Name="PageSizeElementPath" Value="pageSize" />
            <RuleParameter Name="ResultElementPath" Value="results" />
          </RuleParameters>
        </ValidationRule>
      </ValidationRules>
      <QueryStringParameters>
        <QueryStringParameter Name="pageSize" Value="20" RecordedValue="" CorrelationBinding="" UrlEncode="True" UseToGroupResults="False" />
      </QueryStringParameters>
    </Request>
  </Items>
  <DataSources>
    <DataSource Name="CustomerTestDS" Provider="Microsoft.VisualStudio.TestTools.DataSource.XML" Connection="|DataDirectory|\Data\CustomerTestData.xml">
      <Tables>
        <DataSourceTable Name="CustomerTestData" SelectColumns="SelectOnlyBoundColumns" AccessMethod="Sequential" />
      </Tables>
    </DataSource>
  </DataSources>
  <ContextParameters>
    <ContextParameter Name="Azure" Value="http://northwindapi.cloudapp.net" />
  </ContextParameters>
</WebTest>